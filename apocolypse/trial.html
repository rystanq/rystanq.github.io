<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Water Distribution System</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .controls {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      button {
        padding: 10px;
        font-size: 16px;
      }
      input {
        padding: 10px;
        font-size: 16px;
      }
      .output {
        margin-top: 20px;
      }

      .status-on {
        background-color: green;
      }

      .status-off {
        background-color: red;
      }
    </style>
  </head>
  <body>
    <h1>Water Distribution System Controls</h1>
    <div class="controls">
      <!-- Manual Control Buttons -->
      <button class="status-on" onclick="ManualToggle(this)">Gate 1</button>
      <button class="status-on" onclick="ManualToggle(this)">Gate 2</button>
      <button class="status-on" onclick="ManualToggle(this)">Gate 3</button>

      <!-- Input Fields -->
      <input type="text" id="gateInput" placeholder="Enter Gate (e.g., G1)" />
      <input
        type="text"
        id="formatInput"
        placeholder="Enter Format (e.g., mL or Minutes)"
      />
      <input
        type="number"
        id="amountInput"
        placeholder="Enter Amount (e.g., 1000)"
      />

      <!-- Save Button -->
      <button onclick="saveData()">Save Data</button>
    </div>

    <!-- Output Display -->
    <div class="output">
      <h2>Saved Data:</h2>
      <pre id="savedData"></pre>
    </div>

    <script>
      // Function to toggle button classes
      function ManualToggle(button) {
        if (button.getAttribute("class") === "status-on") {
          button.setAttribute("class", "status-off"); // Stop flow
        } else {
          button.setAttribute("class", "status-on"); // Start flow
        }
      }

      // Function to save input data to localStorage
      function saveData() {
        // Get input values
        const gate = document.getElementById("gateInput").value;
        const format = document.getElementById("formatInput").value;
        const amount = document.getElementById("amountInput").value;

        // Validate input
        if (!gate || !format || !amount) {
          alert("Please fill in all fields!");
          return;
        }

        // Create data object
        const data = {
          gate: gate,
          format: format,
          amount: amount,
        };

        // Save to localStorage
        localStorage.setItem("waterData", JSON.stringify(data));

        // Display saved data
        displaySavedData();
      }

      // Function to display saved data, I had chatgpt do this for me, if you find a better way to save data just change this and lmk

      function displaySavedData() {
        const savedData = JSON.parse(localStorage.getItem("waterData"));
        const outputElement = document.getElementById("savedData");

        if (savedData) {
          outputElement.textContent = JSON.stringify(savedData, null, 2);
        } else {
          outputElement.textContent = "No data saved yet.";
        }
      }

      // Display saved data on page load
      displaySavedData();
    </script>
  </body>
</html>
